{% extends "base.html" %}
{% block title %}–ù–æ–≤—ã–π –∞–∫—Ç –ø—Ä–∏–µ–º–∞/–ø–µ—Ä–µ–¥–∞—á–∏ ¬∑ –°–£–†–ì–ò–õ{% endblock %}

{% block content %}
<h1>–ù–æ–≤—ã–π –∞–∫—Ç –ø—Ä–∏–µ–º–∞/–ø–µ—Ä–µ–¥–∞—á–∏ —Å–∫–≤–∞–∂–∏–Ω—ã</h1>

<div class="card" style="padding:16px; max-width:820px;">
  <form method="post" action="/documents/well-handover/create" style="display:grid; gap:12px;">

    <label><b>–¢–∏–ø –∞–∫—Ç–∞</b></label>
    <select name="doc_type_id" required>
      <option value="{{ dt_accept.id }}">–ê–∫—Ç –ø—Ä–∏–µ–º–∞ —Å–∫–≤–∞–∂–∏–Ω—ã</option>
      <option value="{{ dt_transfer.id }}">–ê–∫—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Å–∫–≤–∞–∂–∏–Ω—ã</option>
    </select>

    <label><b>–°–∫–≤–∞–∂–∏–Ω–∞</b></label>
    <select name="well_id" required>
      {% for w in wells %}
        <option value="{{ w.id }}"{% if selected_well_id == w.id %} selected{% endif %}>{{ w.number }}</option>
      {% endfor %}
    </select>

    <div style="background:#f8f9fa; padding:12px; border-radius:6px; border-left:3px solid #0d6efd;">
      <div style="font-weight:600; margin-bottom:8px;">üìÖ –î–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞</div>
      <div style="font-size:13px; opacity:0.8; margin-bottom:12px;">
        –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±–µ –¥–∞—Ç—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ–∫—É—â–∏–º –º–æ–º–µ–Ω—Ç–æ–º. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏—Ö –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.
      </div>

      <label><b>–î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤–≤–µ—Ä—Ö—É –∞–∫—Ç–∞)</b></label>
      <input type="date" name="act_date" style="margin-bottom:12px;">
      <div style="font-size:12px; opacity:0.7; margin-top:-8px; margin-bottom:12px;">
        –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–∞—Ç–∞ –ø–µ—Ä–µ–¥–∞—á–∏
      </div>

      <label><b>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–¥–∞—á–∏</b></label>
      <input type="datetime-local" name="handover_dt" required>
      <div style="font-size:12px; opacity:0.7; margin-top:-8px;">
        –ö–æ–≥–¥–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ —Å–∫–≤–∞–∂–∏–Ω—É
      </div>
    </div>

    <label><b>–ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞</b></label>
    <input name="contract_number" value="{{ default_contract }}" />

    <label><b>–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –≤–æ–∫—Ä—É–≥ —Å–∫–≤–∞–∂–∏–Ω—ã</b></label>
    <input name="territory_state" value="{{ default_territory }}" />

    <label><b>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</b></label>
    <textarea name="note" rows="3"></textarea>

    <div style="display:flex; gap:10px;">
      <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
      <a href="/documents" class="admin-link">‚Üê –Ω–∞–∑–∞–¥</a>
    </div>
  </form>
</div>

<script>
// –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º
document.addEventListener('DOMContentLoaded', function() {
  const handoverInput = document.querySelector('input[name="handover_dt"]');
  if (handoverInput && !handoverInput.value) {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    handoverInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
  }
});
</script>
{% endblock %}